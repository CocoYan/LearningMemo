# ElasticSearch 基础概念

## Doc 文档
* 文档是所有可搜索数据的最小单位。如一篇文章、一个视频。
* 文档会被序列化成JSON格式存储
* 每个文档都有一个Unique ID。可在创建时指定，也可自动生成。

## Index 索引
* 索引是一类文档的集合。
* 每个索引都有自己的mapping定义，用于定义所包含文档的字段名和字段类型。
* 索引的setting定义了其数据的物理分布。

## Shard 分片
* Shard是物理空间的概念，索引中的数据分散在Shard上。
* Shard分为主分片(Primary Shard)和副本(Replica Shard)
  * 主分片，用于解决数据水平扩展的问题。通过主分片，可以将数据分布到集群内的所有节点上。
    * 主分片在索引创建时指定，数量和分布都确定下来，后续不允许修改。因此若此时扩展集群，主分片也无法得到扩展。
  * 副本，是主分片的拷贝，用于解决数据高可用的问题。‘
    * 副本数量可以动态调整。
    * 增加副本数量，可以在一定程度上提高服务的可用性（读取的吞吐）
    
```json
PUT /blogs
{
  "settings": {
    "number_of_shards": 3,
    "number_of_replicas" :1
  }
}
```
